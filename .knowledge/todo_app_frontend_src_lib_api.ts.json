{"is_source_file": true, "format": "TypeScript", "description": "This file defines an API layer for a Todo application, utilizing localStorage for storage and providing functions to list, add, update, and delete todos. It includes type definitions, helper functions for storage management, and placeholder comments for potential backend API integration.", "external_files": ["None explicitly imported, but references to environment variables and crypto APIs suggest reliance on browser environment and built-in APIs."], "external_methods": ["setTimeout", "JSON.parse", "JSON.stringify", "crypto.randomUUID"], "published": ["listTodos", "addTodo", "updateTodo", "deleteTodo", "Todo"], "classes": [], "methods": [{"name": "function readFromStorage(): Todo[] { readFromStorage", "description": "Reads todos from localStorage, returning an empty array if errors occur.", "scope": "", "scopeKind": ""}, {"name": "function writeToStorage(todos: Todo[]) { writeToStorage", "description": "Saves the provided todos array to localStorage.", "scope": "", "scopeKind": ""}, {"name": "function delay(ms = 120) { delay", "description": "Returns a promise that resolves after a specified delay to simulate network latency.", "scope": "", "scopeKind": ""}, {"name": "export async function listTodos(): Promise<Todo[]> { listTodos", "description": "Retrieves the list of todos from localStorage, simulating an API call.", "scope": "", "scopeKind": ""}, {"name": "export async function addTodo(title: string): Promise<Todo> { addTodo", "description": "Creates a new todo item with a unique ID and stores it in localStorage.", "scope": "", "scopeKind": ""}, {"name": "export async function updateTodo( updateTodo", "description": "Updates an existing todo's title or completion status by ID.", "scope": "", "scopeKind": ""}, {"name": "export async function deleteTodo(id: string): Promise<{ id: string }> { deleteTodo", "description": "Removes a todo item by ID from localStorage.", "scope": "", "scopeKind": ""}], "calls": ["setTimeout", "JSON.parse", "JSON.stringify", "crypto.randomUUID", "readFromStorage", "writeToStorage"], "search-terms": ["localStorage Todo API", "TypeScript todo functions", "local storage manipulation", "Todo data type", "simulate API delay", "update Todo by ID"], "state": 2, "file_id": 12, "knowledge_revision": 41, "git_revision": "", "revision_history": [{"25": ""}, {"41": ""}], "ctags": [{"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^const STORAGE_KEY = \"todo_app_frontend.todos\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "Todo", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^export type Todo = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "addTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^export async function addTodo(title: string): Promise<Todo> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "current", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const current = readFromStorage();$/", "language": "TypeScript", "kind": "constant", "scope": "addTodo", "scopeKind": "function"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^function delay(ms = 120) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "deleteTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^export async function deleteTodo(id: string): Promise<{ id: string }> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^    ...todos[idx],$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const idx = todos.findIndex((t) => t.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "listTodos", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^export async function listTodos(): Promise<Todo[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "newTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const newTodo: Todo = {$/", "language": "TypeScript", "kind": "constant", "scope": "addTodo", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const next = [...todos];$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const next = todos.filter((t) => t.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "deleteTodo", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "addTodo", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "parsed", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^    const parsed = JSON.parse(raw) as Todo[];$/", "language": "TypeScript", "kind": "constant", "scope": "readFromStorage", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^    const raw = window.localStorage.getItem(STORAGE_KEY);$/", "language": "TypeScript", "kind": "constant", "scope": "readFromStorage", "scopeKind": "function"}, {"_type": "tag", "name": "readFromStorage", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^function readFromStorage(): Todo[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "todos", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const todos = readFromStorage();$/", "language": "TypeScript", "kind": "constant", "scope": "deleteTodo", "scopeKind": "function"}, {"_type": "tag", "name": "todos", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const todos = readFromStorage();$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "trimmed", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const trimmed = title.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "addTodo", "scopeKind": "function"}, {"_type": "tag", "name": "updateTodo", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^export async function updateTodo($/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const updated = [newTodo, ...current];$/", "language": "TypeScript", "kind": "constant", "scope": "addTodo", "scopeKind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^  const updated: Todo = {$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^    updatedAt: now,$/", "language": "TypeScript", "kind": "constant", "scope": "updateTodo", "scopeKind": "function"}, {"_type": "tag", "name": "writeToStorage", "path": "/home/kavia/workspace/code-generation/simple-todo-application-225166-225175/todo_app_frontend/src/lib/api.ts", "pattern": "/^function writeToStorage(todos: Todo[]) {$/", "language": "TypeScript", "kind": "function"}], "hash": "6d9f1339985660a36c8d36c3039adea0", "format-version": 4, "code-base-name": "todo_app_frontend", "filename": "todo_app_frontend/src/lib/api.ts"}